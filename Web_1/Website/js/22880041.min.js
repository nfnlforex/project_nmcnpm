async function loadData(e,t,n){const a=await fetch(`${API}/${e}`),o=await a.json();var s=Handlebars.templates[`${t}.hbs`],l={data:o},i=document.getElementById(n);i.innerHTML=s(l)}async function getAuthenticateToken(e,t){let n=await fetch(`${AUTHENTICATE_API}/authenticate`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:e,password:t})}),a=await n.json();if(200===n.status)return a.token;throw new Error(a.message)}async function login(e){e.preventDefault();let t=document.getElementById("username").value,n=document.getElementById("password").value;document.getElementById("errorMessage").innerText="";try{let e=await getAuthenticateToken(t,n);e&&(localStorage.setItem("token",e),document.getElementsByClassName("btn-close")[0].click(),displayControls())}catch(e){document.getElementById("errorMessage").innerText=e,displayControls(!1)}}function displayControls(e=!0){let t=document.getElementsByClassName("linkLogin"),n=document.getElementsByClassName("linkLogout"),a="none",o="block";e||(a="block",o="none");for(let e=0;e<2;e++)t[e].style.display=a,n[e].style.display=o;let s=document.getElementById("leave-comment");s&&(s.style.display=o)}async function checkLogin(){let e=await verifyToken();displayControls(e)}async function verifyToken(){let e=localStorage.getItem("token");if(e){let t=await fetch(`${AUTHENTICATE_API}/verify`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+e}});if(200===t.status)return!0}return!1}function logout(){localStorage.clear(),displayControls(!1)}const API="https://web1-api.vercel.app/api",AUTHENTICATE_API="https://web1-api.vercel.app/users";